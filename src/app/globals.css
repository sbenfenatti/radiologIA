@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 32 30% 93%; /* soft pastel beige */
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 142.1 76.2% 36.3%;
    --primary-foreground: 142.1 76.2% 96.3%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 142.1 76.2% 36.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 215 100% 14%; /* #001e45 equivalentish */
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 142.1 76.2% 36.3%;
    --primary-foreground: 142.1 76.2% 96.3%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 142.1 76.2% 36.3%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', sans-serif;
  }
}

@layer components {
  .glass-panel {
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.6);
  }

  .dark .glass-panel {
    background: rgba(2, 6, 23, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
  }

  .glass-input {
    background: rgba(255, 255, 255, 0.6);
    border: 1px solid rgba(203, 213, 225, 0.6);
  }

  .dark .glass-input {
    background: rgba(15, 23, 42, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
  }

  .image-raw {
    image-orientation: none;
    -webkit-image-orientation: none;
  }

  .animate-spin-custom {
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  .logo-flag-sync {
    animation: logo-flag-sync var(--flag-cycle) ease-in-out infinite;
    filter: hue-rotate(0deg) saturate(1.05);
    will-change: filter;
  }

  @keyframes logo-flag-sync {
    0%,
    70% {
      filter: hue-rotate(0deg) saturate(1.05);
    }
    76% {
      filter: hue-rotate(90deg) saturate(1.15);
    }
    80% {
      filter: hue-rotate(180deg) saturate(1.2);
    }
    84% {
      filter: hue-rotate(300deg) saturate(1.15);
    }
    88%,
    100% {
      filter: hue-rotate(0deg) saturate(1.05);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .logo-flag-sync {
      animation: none;
    }
  }

  .flag-stage {
    --stage-w: min(100vw, calc(100vh * 16 / 9));
    --stage-h: calc(var(--stage-w) * 9 / 16);
    --stage-unit: calc(var(--stage-h) / 14);
    --flag-cycle: 36s;
    --flag-green-opacity: 0.3;
    --flag-yellow-opacity: 0.23;
    --flag-blue-opacity: 0.6;
    --flag-green-blur: 23px;
    --flag-yellow-blur: 17px;
    --flag-blue-blur: 0px;
    --flag-glass-opacity: 0.05;
    --flag-glass-blur: 16px;
    --green-left: 15.642%;
    --green-top: 11.097%;
    --green-w: 68.058%;
    --green-h: 77.192%;
    --yellow-left: 16.652%;
    --yellow-top: 12.143%;
    --yellow-w: 66.696%;
    --yellow-h: 75.714%;
    --blue-left: 35.938%;
    --blue-top: 25%;
    --blue-w: 28.125%;
    --blue-h: 50%;
    isolation: isolate;
  }

  .flag-canvas {
    position: absolute;
    left: 50%;
    top: 50%;
    width: var(--stage-w);
    height: var(--stage-h);
    transform: translate(-50%, -50%);
    z-index: 1;
  }

  .flag-glass {
    position: absolute;
    inset: 0;
    z-index: 2;
    background: rgba(255, 255, 255, var(--flag-glass-opacity));
    backdrop-filter: blur(var(--flag-glass-blur));
    -webkit-backdrop-filter: blur(var(--flag-glass-blur));
    pointer-events: none;
  }

  .dark .flag-glass {
    background: rgba(2, 6, 23, var(--flag-glass-opacity));
  }

  .flag-shape {
    position: absolute;
    z-index: 1;
    filter: none;
    mix-blend-mode: normal;
    pointer-events: none;
    transform-origin: center;
    will-change: transform;
  }


  .flag-green {
    left: var(--green-left);
    top: var(--green-top);
    width: var(--green-w);
    height: var(--green-h);
    background: #009c3b;
    border-radius: calc(var(--stage-unit) * 0.6);
    z-index: 1;
    opacity: var(--flag-green-opacity);
    filter: blur(var(--flag-green-blur));
    animation: flag-green var(--flag-cycle) ease-in-out infinite;
  }

  .flag-yellow {
    left: var(--yellow-left);
    top: var(--yellow-top);
    width: var(--yellow-w);
    height: var(--yellow-h);
    background: #ffdf00;
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    z-index: 2;
    opacity: var(--flag-yellow-opacity);
    filter: blur(var(--flag-yellow-blur));
    animation: flag-yellow var(--flag-cycle) ease-in-out infinite;
  }

  .flag-blue {
    left: var(--blue-left);
    top: var(--blue-top);
    width: var(--blue-w);
    height: var(--blue-h);
    background: #002776;
    border-radius: 9999px;
    z-index: 3;
    opacity: var(--flag-blue-opacity);
    filter: blur(var(--flag-blue-blur));
    mix-blend-mode: normal;
    animation: flag-blue var(--flag-cycle) ease-in-out infinite;
  }


  .flag-glow {
    position: absolute;
    left: var(--green-left);
    top: var(--green-top);
    z-index: 0;
    width: var(--green-w);
    height: var(--green-h);
    transform-origin: center;
    background: radial-gradient(
      circle,
      rgba(0, 39, 118, 0.25) 0%,
      rgba(0, 156, 59, 0.18) 35%,
      rgba(255, 223, 0, 0.12) 55%,
      transparent 70%
    );
    filter: blur(12px);
    opacity: 0;
    mix-blend-mode: screen;
    pointer-events: none;
    animation: flag-glow var(--flag-cycle) ease-in-out infinite;
  }

  .dark .flag-glow {
    mix-blend-mode: color-dodge;
    opacity: 0.08;
  }

  @keyframes flag-green {
    0%,
    12% {
      transform: translate(0, 0) rotate(0deg);
    }
    35% {
      transform: translate(calc(var(--stage-unit) * -10), calc(var(--stage-unit) * -6)) rotate(-3deg);
    }
    50% {
      transform: translate(calc(var(--stage-unit) * 8), calc(var(--stage-unit) * -5)) rotate(2deg);
    }
    62% {
      transform: translate(calc(var(--stage-unit) * -7), calc(var(--stage-unit) * 7)) rotate(2deg);
    }
    75%,
    88%,
    100% {
      transform: translate(0, 0) rotate(0deg);
    }
  }

  @keyframes flag-yellow {
    0%,
    12% {
      transform: translate(0, 0) rotate(0deg);
    }
    35% {
      transform: translate(calc(var(--stage-unit) * 9), calc(var(--stage-unit) * -2)) rotate(0deg);
    }
    50% {
      transform: translate(calc(var(--stage-unit) * -8), calc(var(--stage-unit) * -6)) rotate(0deg);
    }
    62% {
      transform: translate(calc(var(--stage-unit) * 7), calc(var(--stage-unit) * 8)) rotate(0deg);
    }
    75%,
    88%,
    100% {
      transform: translate(0, 0) rotate(0deg);
    }
  }

  @keyframes flag-blue {
    0%,
    12% {
      transform: translate(0, 0);
    }
    32% {
      transform: translate(calc(var(--stage-unit) * -4), calc(var(--stage-unit) * 8));
    }
    48% {
      transform: translate(calc(var(--stage-unit) * 10), calc(var(--stage-unit) * 4));
    }
    62% {
      transform: translate(calc(var(--stage-unit) * -9), calc(var(--stage-unit) * -5));
    }
    75%,
    88%,
    100% {
      transform: translate(0, 0);
    }
  }

  @keyframes flag-glow {
    0%,
    12%,
    100% {
      opacity: 0;
      transform: scale(0.95);
    }
    75% {
      opacity: 0.4;
      transform: scale(1.05);
    }
    88% {
      opacity: 0.25;
      transform: scale(1.02);
    }
  }

  .dashboard-stage {
    position: relative;
    width: min(1600px, 100%);
    aspect-ratio: 16 / 9;
    margin: 0 auto;
  }

  .dashboard-logo {
    left: 30.135%;
    top: -6.615%;
    width: 46.539%;
    height: 71.506%;
  }

  .dashboard-wordmark {
    left: 42.336%;
    top: 48.567%;
    width: 18.095%;
    height: 11.575%;
  }

  .dashboard-card-triagem {
    left: 4.479%;
    top: 55.155%;
    width: 37.929%;
    height: 38.465%;
  }

  .dashboard-card-auxiliar {
    left: 60.831%;
    top: 55.446%;
    width: 37.929%;
    height: 38.465%;
  }

  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-4000 {
    animation-delay: 4s;
  }
}

@layer utilities {
  .scroll-snap-y {
    scroll-snap-type: y mandatory;
  }

  .scroll-snap-start {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }
}
